# Mana - æ™ºèƒ½è´¦å•åˆ†æå¹³å°

è‡ªåŠ¨åˆ†ææ”¯ä»˜å®ã€å¾®ä¿¡ã€é“¶è¡Œå¡è´¦å•ï¼Œæ™ºèƒ½åˆ†ç±»ç»Ÿè®¡ï¼Œå¼‚å¸¸æ£€æµ‹æé†’ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React Router v7 (åŸ Remix)
- **è¿è¡Œæ—¶**: Cloudflare Workers & Pages
- **æ•°æ®åº“**: Cloudflare D1 (SQLite)
- **å­˜å‚¨**: Cloudflare R2
- **æ ·å¼**: Tailwind CSS v4

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š æ”¯æŒå¤šç§è´¦å•æ ¼å¼ï¼ˆæ”¯ä»˜å®ã€å¾®ä¿¡ã€CSVã€Excel .xlsx/.xlsï¼‰
- ğŸ·ï¸ æ™ºèƒ½åˆ†ç±»æ¶ˆè´¹è®°å½•
- ğŸ’° é¢„ç®—ç®¡ç†å’Œè¶…æ”¯æé†’
- ğŸ“ˆ æ¶ˆè´¹è¶‹åŠ¿åˆ†æ
- ğŸ”” å¼‚å¸¸æ”¯å‡ºæ£€æµ‹
- ğŸ¤– AI æ™ºèƒ½åˆ—è¯†åˆ«ï¼ˆéƒ¨åˆ†å®ç°ï¼‰

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# é…ç½®æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
# å¦‚éœ€ä½¿ç”¨ AI åŠŸèƒ½ï¼Œåˆ›å»º .dev.vars æ–‡ä»¶å¹¶æ·»åŠ  API keys
# cp .dev.vars.example .dev.vars

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

è®¿é—® http://localhost:3000

### åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create mana-db

# æ›´æ–° wrangler.toml ä¸­çš„ database_idï¼ˆå–æ¶ˆæ³¨é‡Šå¹¶å¡«å…¥ IDï¼‰

# æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆæœ¬åœ°ï¼‰
pnpm db:init

# æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆç”Ÿäº§ï¼‰
pnpm db:migrate
```

### éƒ¨ç½²åˆ° Cloudflare

```bash
pnpm deploy
```

## é¡¹ç›®ç»“æ„

```
mana/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routes/              # é¡µé¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ _index.tsx       # é¦–é¡µ
â”‚   â”‚   â””â”€â”€ bills.new.tsx    # ä¸Šä¼ è´¦å•é¡µé¢
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“ schema
â”‚   â”‚   â”œâ”€â”€ client/          # å®¢æˆ·ç«¯è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯ï¼ˆAI åˆ—è¯†åˆ«ï¼‰
â”‚   â”‚   â”œâ”€â”€ cache/           # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ parsers/         # è´¦å•è§£æå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ csv.ts       # é€šç”¨ CSV è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ alipay.ts    # æ”¯ä»˜å®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ wechat.ts    # å¾®ä¿¡è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ smart-parser.ts    # AI æ™ºèƒ½è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ universal.ts       # é€šç”¨è§£æå™¨
â”‚   â”‚   â””â”€â”€ analyzers/       # åˆ†æå™¨
â”‚   â”‚       â”œâ”€â”€ categorizer.ts  # æ™ºèƒ½åˆ†ç±»
â”‚   â”‚       â””â”€â”€ anomaly.ts      # å¼‚å¸¸æ£€æµ‹
â”‚   â”œâ”€â”€ root.tsx             # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ entry.client.tsx     # å®¢æˆ·ç«¯å…¥å£
â”‚   â””â”€â”€ entry.server.tsx     # æœåŠ¡ç«¯å…¥å£
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”œâ”€â”€ wrangler.toml            # Cloudflare é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â””â”€â”€ package.json
```

## ä½¿ç”¨è¯´æ˜

### ä¸Šä¼ è´¦å•

1. ä»æ”¯ä»˜å®/å¾®ä¿¡å¯¼å‡º CSV è´¦å•
2. è®¿é—® `/bills/new` ä¸Šä¼ æ–‡ä»¶
3. ç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶åˆ†ç±»

### æŸ¥çœ‹ç»Ÿè®¡

- è®¿é—® `/analytics` æŸ¥çœ‹æ¶ˆè´¹ç»Ÿè®¡
- è®¿é—® `/bills` æŸ¥çœ‹è´¦å•åˆ—è¡¨
- è®¿é—® `/settings` ç®¡ç†åˆ†ç±»è§„åˆ™

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„è´¦å•æ¥æº

åœ¨ `app/lib/parsers/` ä¸­åˆ›å»ºæ–°çš„è§£æå™¨ï¼Œå®ç°ç»Ÿä¸€çš„æ¥å£ï¼š

```typescript
export async function parseNewFormat(file: File): Promise<ParsedBill[]>
```

### è‡ªå®šä¹‰åˆ†ç±»è§„åˆ™

åœ¨ `app/lib/db/schema.sql` ä¸­ä¿®æ”¹ `categories` è¡¨çš„åˆå§‹æ•°æ®ã€‚

## License

MIT
